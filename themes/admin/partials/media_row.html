<tr id="media-row-{% item.id %}" class="{% if item.flash %}laas-flash{% endif %}">
  <td>{% item.id %}</td>
  <td>
    <div class="d-flex align-items-center gap-2">
      {% if item.is_image %}
        <img src="{% item.url %}" alt="" class="img-thumbnail" style="max-width: 80px;">
      {% else %}
        <span class="badge text-bg-secondary">{% item.badge %}</span>
      {% endif %}
      <div>
        <div class="fw-semibold">
          {% foreach item.name_segments as seg %}
            {% if seg.mark %}<mark>{% seg.text %}</mark>{% else %}{% seg.text %}{% endif %}
          {% endforeach %}
        </div>
        <a href="{% item.url %}" class="small" target="_blank" rel="noopener">{% t 'admin.media.open' %}</a>
      </div>
    </div>
  </td>
  <td>
    {% foreach item.mime_segments as seg %}
      {% if seg.mark %}<mark>{% seg.text %}</mark>{% else %}{% seg.text %}{% endif %}
    {% endforeach %}
  </td>
  <td>{% item.size_display %}</td>
  <td>{% item.created_at_display %}</td>
  <td>
    <div class="btn-group btn-group-sm" role="group">
      <a class="btn btn-outline-secondary" href="{% item.url %}" target="_blank" rel="noopener">{% t 'admin.media.download' %}</a>
      <button class="btn btn-outline-secondary"
              type="button"
              hx-post="/admin/media/{% item.id %}/public"
              hx-vals='{"_token":"{% csrf_token %}"}'
              hx-target="#media-row-{% item.id %}"
              hx-swap="outerHTML"
              hx-indicator="#loading"
              hx-disabled-elt="this">
        {% item.public_label %}
      </button>
      <button class="btn btn-outline-danger"
              type="button"
              hx-post="/admin/media/delete"
              hx-vals='{"id":"{% item.id %}"}'
              hx-target="#media-row-{% item.id %}"
              hx-swap="outerHTML"
              hx-confirm="{% t 'admin.media.confirm_delete' %}"
              hx-indicator="#loading"
              hx-disabled-elt="this">
        {% t 'admin.media.delete' %}
      </button>
    </div>
    <div class="mt-2 d-flex flex-wrap gap-2 align-items-center">
      <span class="badge {% item.public_class %}">{% item.public_label %}</span>
      {% if item.public_mode_all %}
        <button class="btn btn-sm btn-outline-primary"
                type="button"
                hx-get="/admin/media/{% item.id %}/signed?p=view&public=1"
                hx-target="#media-url-{% item.id %}"
                hx-swap="innerHTML"
                hx-indicator="#loading"
                hx-disabled-elt="this">
          {% t 'media.public.on' %}
        </button>
      {% endif %}
      {% if item.public_mode_signed %}
      {% if item.is_public %}
      {% if item.signed_enabled %}
        <button class="btn btn-sm btn-outline-primary"
                type="button"
                hx-get="/admin/media/{% item.id %}/signed?p=view"
                hx-target="#media-url-{% item.id %}"
                hx-swap="innerHTML"
                hx-indicator="#loading"
                hx-disabled-elt="this">
          {% t 'media.signed.url' %}
        </button>
      {% endif %}
      {% endif %}
      {% endif %}
    </div>
    <div id="media-url-{% item.id %}" class="mt-2"></div>
  </td>
</tr>
