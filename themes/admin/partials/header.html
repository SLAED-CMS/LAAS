<nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom mb-4">
  <div class="container-xxl">
    <a class="navbar-brand" href="/admin">Admin</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#adminNav" aria-controls="adminNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="adminNav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0 flex-wrap">
        <li class="nav-item"><a class="nav-link" href="/">{% t 'admin.nav.home' %}</a></li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            {% t 'admin.nav.modules' %}
          </a>
          <ul class="dropdown-menu nav-modules-menu">
            <li class="nav-modules-search px-3 py-2">
              <input type="search"
                     id="modules-nav-q"
                     class="form-control form-control-sm"
                     placeholder="Search modules..."
                     aria-label="Search modules">
            </li>
            <li><hr class="dropdown-divider my-1"></li>
            {% if admin_modules_nav_sections %}
            {% foreach admin_modules_nav_sections as section %}
            <li class="nav-modules-section" data-modules-nav-section="{% section.key %}">
              <div class="dropdown-header text-uppercase small text-muted" role="presentation">{% section.title %}</div>
              <div class="nav-modules-section-items">
                {% if section.items %}
                  {% foreach section.items as module %}
                  <div class="dropdown-item nav-modules-item d-flex align-items-center justify-content-between gap-2"
                       data-modules-nav-item="1"
                       data-section="{% section.key %}"
                       data-search="{% module.nav_search %}">
                    <a class="nav-modules-link d-flex align-items-center gap-2 text-decoration-none"
                       href="{% if module.admin_url %}{% module.admin_url %}{% else %}/admin/modules{% module.details_anchor %}{% endif %}">
                      <i class="bi bi-{% module.icon %}"></i>
                      <span class="nav-modules-title">{% module.nav_label %}</span>
                      {% if module.nav_badge %}
                      <span class="badge text-bg-{% module.nav_badge_tone %} nav-modules-badge">{% module.nav_badge %}</span>
                      {% endif %}
                    </a>
                    <div class="d-flex align-items-center gap-1 flex-nowrap nav-modules-actions">
                      {% if module.actions_nav %}
                      {% foreach module.actions_nav as action %}
                      <a class="btn btn-sm btn-outline-secondary py-0 px-1"
                         href="{% action.url %}"
                         aria-label="{% action.label %}"
                         data-bs-toggle="tooltip"
                         data-bs-placement="left"
                         title="{% action.label %}">
                        <i class="bi bi-{% action.icon %}"></i>
                      </a>
                      {% endforeach %}
                      {% endif %}
                    </div>
                  </div>
                  {% endforeach %}
                {% else %}
                  <div class="dropdown-item text-muted small">No modules</div>
                {% endif %}
              </div>
            </li>
            {% endforeach %}
            {% endif %}
            <li class="nav-modules-empty text-muted small text-center d-none" data-modules-nav-empty="1">No matches.</li>
            <li><hr class="dropdown-divider my-1"></li>
            <li><a class="dropdown-item" href="/admin/modules">All modules</a></li>
          </ul>
        </li>
        <li class="nav-item"><a class="nav-link" href="/admin/menus">{% t 'admin.nav.menus' %}</a></li>
        <li class="nav-item"><a class="nav-link" href="/admin/pages">{% t 'admin.nav.pages' %}</a></li>
        <li class="nav-item"><a class="nav-link" href="/admin/media">{% t 'admin.nav.media' %}</a></li>
        <li class="nav-item"><a class="nav-link" href="/admin/changelog">{% t 'admin.nav.changelog' %}</a></li>
        <li class="nav-item"><a class="nav-link" href="/admin/api-tokens">{% t 'admin.nav.api_tokens' %}</a></li>
        <li class="nav-item"><a class="nav-link" href="/admin/settings">{% t 'admin.nav.settings' %}</a></li>
        <li class="nav-item"><a class="nav-link" href="/admin/users">{% t 'admin.nav.users' %}</a></li>
        <li class="nav-item"><a class="nav-link" href="/admin/users/roles">{% t 'admin.users.roles' %}</a></li>
        <li class="nav-item"><a class="nav-link" href="/admin/audit">{% t 'admin.nav.audit' %}</a></li>
        <li class="nav-item"><a class="nav-link" href="/admin/ops">{% t 'admin.nav.ops' %}</a></li>
        <li class="nav-item"><a class="nav-link" href="/admin/security-reports">{% t 'admin.nav.security_reports' %}</a></li>
      </ul>
      <div class="d-flex gap-2 align-items-center ms-lg-auto flex-wrap">
        <form class="d-flex align-items-center gap-2" method="get" action="/admin/search">
          <input type="search"
                 name="q"
                 class="form-control form-control-sm"
                 placeholder="{% t 'admin.search.placeholder' %}"
                 value="{% q %}"
                 hx-get="/admin/search"
                 hx-trigger="keyup changed delay:300ms"
                 hx-target="#admin-search-results"
                 hx-include="[name=q]"
                 hx-indicator="#loading">
        </form>
        <form method="post" action="/logout">
          <input type="hidden" name="_token" value="{% csrf_token %}">
          <button class="btn btn-outline-secondary btn-sm" type="submit">{% t 'admin.nav.logout' %}</button>
        </form>
      </div>
    </div>
  </div>
</nav>
